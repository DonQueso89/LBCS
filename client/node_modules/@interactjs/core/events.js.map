{
	"version": 3,
	"sources": [
		"events.ts"
	],
	"names": [
		"arr",
		"domUtils",
		"extend",
		"is",
		"pExtend",
		"pointerUtils",
		"install",
		"scope",
		"targets",
		"delegatedEvents",
		"documents",
		"eventsMethods",
		"add",
		"remove",
		"addDelegate",
		"removeDelegate",
		"delegateListener",
		"delegateUseCapture",
		"supportsOptions",
		"supportsPassive",
		"document",
		"createElement",
		"addEventListener",
		"capture",
		"passive",
		"events",
		"eventTarget",
		"type",
		"listener",
		"optionalArg",
		"options",
		"getOptions",
		"target",
		"find",
		"t",
		"push",
		"contains",
		"targetIndex",
		"findIndex",
		"hasOwnProperty",
		"typeIsEmpty",
		"typeListeners",
		"i",
		"length",
		"removeEventListener",
		"splice",
		"Object",
		"keys",
		"selector",
		"context",
		"doc",
		"delegates",
		"delegate",
		"d",
		"listeners",
		"matchFound",
		"index",
		"cur",
		"fn",
		"event",
		"fakeEvent",
		"FakeEvent",
		"getEventTargets",
		"element",
		"matchesSelector",
		"nodeContains",
		"currentTarget",
		"parentNode",
		"call",
		"constructor",
		"originalEvent",
		"preventOriginalDefault",
		"preventDefault",
		"stopPropagation",
		"stopImmediatePropagation",
		"param",
		"object",
		"id"
	],
	"mappings": "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",
	"sourcesContent": [
		"import * as arr from '@interactjs/utils/arr'\nimport * as domUtils from '@interactjs/utils/domUtils'\nimport extend from '@interactjs/utils/extend'\nimport * as is from '@interactjs/utils/is'\nimport pExtend from '@interactjs/utils/pointerExtend'\nimport * as pointerUtils from '@interactjs/utils/pointerUtils'\n\ndeclare module '@interactjs/core/scope' {\n  interface Scope {\n    events: ReturnType<typeof install>\n  }\n}\n\ntype Listener = (event: Event | FakeEvent) => any\n\nfunction install (scope: Interact.Scope) {\n  const targets: Array<{\n    eventTarget: EventTarget\n    events: { [type: string]: Listener[] }\n  }> = []\n\n  const delegatedEvents: {\n    [type: string]: Array<{\n      selector: string\n      context: Node\n      listeners: Array<[Listener, { capture: boolean, passive: boolean }]>\n    }>\n  } = {}\n  const documents: Document[] = []\n\n  const eventsMethods = {\n    add,\n    remove,\n\n    addDelegate,\n    removeDelegate,\n\n    delegateListener,\n    delegateUseCapture,\n    delegatedEvents,\n    documents,\n\n    targets,\n\n    supportsOptions: false,\n    supportsPassive: false,\n  }\n\n  // check if browser supports passive events and options arg\n  scope.document.createElement('div').addEventListener('test', null, {\n    get capture () { return (eventsMethods.supportsOptions = true) },\n    get passive () { return (eventsMethods.supportsPassive = true) },\n  })\n\n  scope.events = eventsMethods\n\n  function add (eventTarget: EventTarget, type: string, listener: Listener, optionalArg?: boolean | any) {\n    const options = getOptions(optionalArg)\n    let target = arr.find(targets, t => t.eventTarget === eventTarget)\n\n    if (!target) {\n      target = {\n        eventTarget,\n        events: {},\n      }\n\n      targets.push(target)\n    }\n\n    if (!target.events[type]) {\n      target.events[type] = []\n    }\n\n    if (eventTarget.addEventListener && !arr.contains(target.events[type], listener)) {\n      eventTarget.addEventListener(type, listener as any, eventsMethods.supportsOptions ? options : options.capture)\n      target.events[type].push(listener)\n    }\n  }\n\n  function remove (eventTarget: EventTarget, type: string, listener?: 'all' | Listener, optionalArg?: boolean | any) {\n    const options = getOptions(optionalArg)\n    const targetIndex = arr.findIndex(targets, t => t.eventTarget === eventTarget)\n    const target = targets[targetIndex]\n\n    if (!target || !target.events) {\n      return\n    }\n\n    if (type === 'all') {\n      for (type in target.events) {\n        if (target.events.hasOwnProperty(type)) {\n          remove(eventTarget, type, 'all')\n        }\n      }\n      return\n    }\n\n    let typeIsEmpty = false\n    const typeListeners = target.events[type]\n\n    if (typeListeners) {\n      if (listener === 'all') {\n        for (let i = typeListeners.length - 1; i >= 0; i--) {\n          remove(eventTarget, type, typeListeners[i], options)\n        }\n        return\n      }\n      else {\n        for (let i = 0; i < typeListeners.length; i++) {\n          if (typeListeners[i] === listener) {\n            eventTarget.removeEventListener(type, listener as any, eventsMethods.supportsOptions ? options : options.capture)\n            typeListeners.splice(i, 1)\n\n            if (typeListeners.length === 0) {\n              delete target.events[type]\n              typeIsEmpty = true\n            }\n\n            break\n          }\n        }\n      }\n    }\n\n    if (typeIsEmpty && !Object.keys(target.events).length) {\n      targets.splice(targetIndex, 1)\n    }\n  }\n\n  function addDelegate (selector: string, context: Node, type: string, listener: Listener, optionalArg?: any) {\n    const options = getOptions(optionalArg)\n    if (!delegatedEvents[type]) {\n      delegatedEvents[type] = []\n\n      // add delegate listener functions\n      for (const doc of documents) {\n        add(doc, type, delegateListener)\n        add(doc, type, delegateUseCapture, true)\n      }\n    }\n\n    const delegates = delegatedEvents[type]\n    let delegate = arr.find(delegates, d => d.selector === selector && d.context === context)\n\n    if (!delegate) {\n      delegate = { selector, context, listeners: [] }\n      delegates.push(delegate)\n    }\n\n    delegate.listeners.push([listener, options])\n  }\n\n  function removeDelegate (\n    selector: string,\n    context: Document | Interact.Element,\n    type: string,\n    listener?: Listener,\n    optionalArg?: any,\n  ) {\n    const options = getOptions(optionalArg)\n    const delegates = delegatedEvents[type]\n    let matchFound = false\n    let index: number\n\n    if (!delegates) { return }\n\n    // count from last index of delegated to 0\n    for (index = delegates.length - 1; index >= 0; index--) {\n      const cur = delegates[index]\n      // look for matching selector and context Node\n      if (cur.selector === selector && cur.context === context) {\n        const { listeners } = cur\n\n        // each item of the listeners array is an array: [function, capture, passive]\n        for (let i = listeners.length - 1; i >= 0; i--) {\n          const [fn, { capture, passive }] = listeners[i]\n\n          // check if the listener functions and capture and passive flags match\n          if (fn === listener && capture === options.capture && passive === options.passive) {\n            // remove the listener from the array of listeners\n            listeners.splice(i, 1)\n\n            // if all listeners for this target have been removed\n            // remove the target from the delegates array\n            if (!listeners.length) {\n              delegates.splice(index, 1)\n\n              // remove delegate function from context\n              remove(context, type, delegateListener)\n              remove(context, type, delegateUseCapture, true)\n            }\n\n            // only remove one listener\n            matchFound = true\n            break\n          }\n        }\n\n        if (matchFound) { break }\n      }\n    }\n  }\n\n  // bound to the interactable context when a DOM event\n  // listener is added to a selector interactable\n  function delegateListener (event: Event, optionalArg?: any) {\n    const options = getOptions(optionalArg)\n    const fakeEvent = new FakeEvent(event)\n    const delegates = delegatedEvents[event.type]\n    const [eventTarget] = (pointerUtils.getEventTargets(event))\n    let element: Node = eventTarget\n\n    // climb up document tree looking for selector matches\n    while (is.element(element)) {\n      for (let i = 0; i < delegates.length; i++) {\n        const cur = delegates[i]\n        const { selector, context } = cur\n\n        if (domUtils.matchesSelector(element, selector) &&\n            domUtils.nodeContains(context, eventTarget) &&\n            domUtils.nodeContains(context, element)) {\n          const { listeners } = cur\n\n          fakeEvent.currentTarget = element\n\n          for (const [fn, { capture, passive }] of listeners) {\n            if (capture === options.capture && passive === options.passive) {\n              fn(fakeEvent)\n            }\n          }\n        }\n      }\n\n      element = domUtils.parentNode(element)\n    }\n  }\n\n  function delegateUseCapture (event: Event) {\n    return delegateListener.call(this, event, true)\n  }\n\n  // for type inferrence\n  return eventsMethods\n}\n\nexport class FakeEvent implements Partial<Event> {\n  currentTarget: EventTarget\n\n  constructor (public originalEvent: Event) {\n    // duplicate the event so that currentTarget can be changed\n    pExtend(this, originalEvent)\n  }\n\n  preventOriginalDefault () {\n    this.originalEvent.preventDefault()\n  }\n\n  stopPropagation () {\n    this.originalEvent.stopPropagation()\n  }\n\n  stopImmediatePropagation () {\n    this.originalEvent.stopImmediatePropagation()\n  }\n}\n\nfunction getOptions (param: { [index: string]: any } | boolean): { capture: boolean, passive: boolean } {\n  if (!is.object(param)) { return { capture: !!param, passive: false } }\n\n  const options = extend({}, param) as any\n\n  options.capture = !!param.capture\n  options.passive = !!param.passive\n\n  return options\n}\n\nexport default {\n  id: 'events',\n  install,\n}\n"
	]
}