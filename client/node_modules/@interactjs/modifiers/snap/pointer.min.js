import*as e from"../../utils/index.min.js";import{makeModifier as t}from"../base.min.js";const n={start(t){const{interaction:n,interactable:r,element:i,rect:a,state:s,startOffset:o}=t,{options:l}=s,c=l.offsetWithOrigin?function(t){const{element:n}=t.interaction;return e.rect.rectToXY(e.rect.resolveRectLike(t.state.options.origin,null,null,[n]))||e.getOriginXY(t.interactable,n,t.interaction.prepared.name)}(t):{x:0,y:0};let g;if("startCoords"===l.offset)g={x:n.coords.start.page.x,y:n.coords.start.page.y};else{const t=e.rect.resolveRectLike(l.offset,r,i,[n]);g=e.rect.rectToXY(t)||{x:0,y:0},g.x+=c.x,g.y+=c.y}const{relativePoints:f}=l;s.offsets=a&&f&&f.length?f.map((e,t)=>({index:t,relativePoint:e,x:o.left-a.width*e.x+g.x,y:o.top-a.height*e.y+g.y})):[e.extend({index:0,relativePoint:null},g)]},set(t){const{interaction:n,coords:r,state:i}=t,{options:a,offsets:s}=i,o=e.getOriginXY(n.interactable,n.element,n.prepared.name),l=e.extend({},r),c=[];a.offsetWithOrigin||(l.x-=o.x,l.y-=o.y);for(const t of s){const r=l.x-t.x,i=l.y-t.y;for(let s=0,o=a.targets.length;s<o;s++){const o=a.targets[s];let l;l=e.is.func(o)?o(r,i,n,t,s):o,l&&c.push({x:(e.is.number(l.x)?l.x:r)+t.x,y:(e.is.number(l.y)?l.y:i)+t.y,range:e.is.number(l.range)?l.range:a.range,source:o,index:s,offset:t})}}const g={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}};for(const t of c){const n=t.range,r=t.x-l.x,i=t.y-l.y,a=e.hypot(r,i);let s=a<=n;n===1/0&&g.inRange&&g.range!==1/0&&(s=!1),g.target&&!(s?g.inRange&&n!==1/0?a/n<g.distance/g.range:n===1/0&&g.range!==1/0||a<g.distance:!g.inRange&&a<g.distance)||(g.target=t,g.distance=a,g.range=n,g.inRange=s,g.delta.x=r,g.delta.y=i)}return g.inRange&&(r.x=g.target.x,r.y=g.target.y),i.closest=g,g},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}};export default t(n,"snap");export{n as snap};
//# sourceMappingURL=pointer.min.js.map