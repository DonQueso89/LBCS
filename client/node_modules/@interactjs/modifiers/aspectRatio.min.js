import t from"../utils/extend.min.js";import{addEdges as e}from"../utils/rect.min.js";import o from"./Modification.min.js";import{makeModifier as i}from"./base.min.js";const s={start(e){const{state:i,rect:s,edges:r,pageCoords:a}=e;let{ratio:n}=i.options;const{equalDelta:d,modifiers:l}=i.options;"preserve"===n&&(n=s.width/s.height),i.startCoords=t({},a),i.startRect=t({},s),i.ratio=n,i.equalDelta=d;const c=i.linkedEdges={top:r.top||r.left&&!r.bottom,left:r.left||r.top&&!r.right,bottom:r.bottom||r.right&&!r.top,right:r.right||r.bottom&&!r.left};if(i.xIsPrimaryAxis=!(!r.left&&!r.right),i.equalDelta)i.edgeSign=(c.left?1:-1)*(c.top?1:-1);else{const t=i.xIsPrimaryAxis?c.top:c.left;i.edgeSign=t?-1:1}if(t(e.edges,c),!l||!l.length)return;const f=new o(e.interaction);f.copyFrom(e.interaction.modification),f.prepareStates(l),i.subModification=f,f.startAll({...e})},set(o){const{state:i,rect:s,coords:n}=o,d=t({},n),l=i.equalDelta?r:a;if(l(i,i.xIsPrimaryAxis,n,s),!i.subModification)return null;const c=t({},s);e(i.linkedEdges,c,{x:n.x-d.x,y:n.y-d.y});const f=i.subModification.setAll({...o,rect:c,edges:i.linkedEdges,pageCoords:n,prevCoords:n,prevRect:c}),{delta:g}=f;if(f.changed){l(i,Math.abs(g.x)>Math.abs(g.y),f.coords,f.rect),t(n,f.coords)}return f.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function r({startCoords:t,edgeSign:e},o,i){o?i.y=t.y+(i.x-t.x)*e:i.x=t.x+(i.y-t.y)*e}function a({startRect:t,startCoords:e,ratio:o,edgeSign:i},s,r,a){if(s){const s=a.width/o;r.y=e.y+(s-t.height)*i}else{const s=a.height*o;r.x=e.x+(s-t.width)*i}}export default i(s,"aspectRatio");export{s as aspectRatio};
//# sourceMappingURL=aspectRatio.min.js.map